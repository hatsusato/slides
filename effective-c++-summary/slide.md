class: center, middle

# .title[Effective C++ 総集編]

## hatsusato

KMC春合宿2017

---

# Self-introduction

![enter](enter.png)

## @hatsusato

- KMC5回生 まもなくM2

- 理学部数学系卒

- 五十嵐研究室

- プログラミング言語つくる

- コンパイラ進捗ダメです

---
name: introduction
layout: true

# Introduction

---

- C++は *"expert friendly"*[1] とも呼ばれるように、習得の難しい言語です。
  - 実際、初心者が入門書を読んだだけでは、堅牢で効率のよいコード(正しいコード)をC++で書くことは非常に困難です。
- こういったC++の学習をとりまく状況の中で、 *Effective C++* は中級以上へとステップアップするために欠かせない本として不動の地位を築いてきた。

.footnote[[1] by Bjarne Stroustrup, [The Problem with Programming](https://www.technologyreview.com/s/406923/the-problem-with-programming/)]

---

- 一方、時間の流れの中で *Effective C++* は着実に古びていっている。
  - 現在手に入る日本語の第3版の初刷は2006年のことであり、C++11以後の現在とは隔世の感がある。
- 確かに *Effective C++* には現在にもなお通じる重要なアドバイスが豊富にまとまった良書ではあるが、C++11以後では推奨されなくなっていたり、誤っていたりする主張も含まれていて、現在ではおすすめしづらい本へと変わってきている。
- C++11対応を謳った *Effective Modern C++* は、結局 *Effective C++* とは別の内容を扱っており、著者もどうやらこれ以上 *Effective C++* を更新するつもりはないらしい[2]。

.footnote[[2] http://scottmeyers.blogspot.jp/2015/12/good-to-go.html]

---

- 以上を踏まえて、*Effective C++* の古い内容を整理して、重要な情報のみを凝縮したドキュメントが必要だという結論に至りました。
- 古い内容を改める部分などは、C++11以降の状況や個人の考えも入ったものになっているので、元の本から大きく異なる部分もあります。ご了承ください。

---

- *Effective C++* 全体の内容の分量は発表するには多すぎるので、今回はその一部を発表します。
- 本来は副読本として *Effective C++* と合わせて読んだり、のちの勉強会などで使ってもらうことを想定しています。

---
name: table-of-contents
layout: true

# Table of contents

---

- **第1章 C++に慣れよう**
- 第2章 コンストラクタ、デストラクタ、コピー代入演算子
- 第3章 リソース管理
- 第4章 デザインと宣言
- 第5章 実装
- 第6章 継承とオブジェクト指向設計
- 第7章 テンプレートとジェネリックプログラミング
- 第8章 `new`と`delete`のカスタマイズ
- 第9章 いろいろな事

---
name: item-1
layout: true

## 1項 C++を複数の言語の連合とみなそう

---

- C++はマルチパラダイムな言語だと言われる。
- 正しく効率的なコードを書くために従うべきルールは、コードがどのパラダイムを利用しているかに応じて変わってくる。
  - 例えば、値渡しにするか参照渡しにするかの選択など。

---

C++は以下の4つの言語の連合とみなすべきです。

- C
  - C++の基本的は部分はCから来ている。
- オブジェクト指向C++
  - Cにはないクラスを扱うときにはオブジェクト指向のルールに従う。
- テンプレートC++
  - ジェネリックプログラミングをサポートする。他のパラダイムとは交わらない部分が多い。
- STL
  - STLをうまく扱うには独自の規約を理解する必要がある。関数型っぽいところがある。

---
name: item-2
layout: true

## 2項 `#define` より、`const`、`enum`、`inline`を使おう

---

- 今やC言語の方でも成り立つ指針になっていますが、定数やインライン関数を表すのにマクロを使うのをやめましょう。
- *`enum`を使おう* というのは`enum`ハックの話で、もはや現代的ではありません。`static const`を用いましょう。
- `inline`に関しては、**現代のコンパイラは人間より賢い**です。`inline`指定ではなく最適化オプションを用いましょう。
  - 最適化オプションを使えば、**たとえ`inline`指定していなくても**、インライン化すべきとコンパイラが判断すればインライン化されます。
  - テンプレート関数などとは違って、ソースファイルに書かれたコードであっても、リンク時最適化を行えばインラインにできます。
